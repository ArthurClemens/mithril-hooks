!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("mithril")):"function"==typeof define&&define.amd?define(["exports","mithril"],e):e((t=t||self).mithrilHooks=t.mithrilHooks||{},t.m)}(this,function(t,e){"use strict";function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,u=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw u}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o;e=e&&e.hasOwnProperty("default")?e.default:e;var u=Function.prototype.call.bind(Function.prototype.call),a=e.redraw,i=function(t){var e=o,n=e.depsIndex++,r=e.depsStates[n]||[],u=void 0===t||!!Array.isArray(t)&&(t.length>0?!t.every(function(t,e){return t===r[e]}):!e.setup);return e.depsStates[n]=t,u},s=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(e,n){var r=o;if(i(n)){var u=function(){var t=e();"function"==typeof t&&(r.teardowns.set(e,t),r.teardowns.set("_",a))};r.updates.push(t?function(){return new Promise(function(t){return requestAnimationFrame(t)}).then(u)}:u)}}},f=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(t){return t},n=o,r=n.statesIndex++;return n.setup||(n.states[r]=t),[n.states[r],function(t){var o=n.states[r],u=e(t,r);n.states[r]=u,u!==o&&a()}]},c=s(!0),l=s(),d=function(t,e){var r=o,u=i(e),a=n(r.setup?f():f(t()),2),s=a[0],c=a[1];return r.setup&&u&&c(t()),s};t.useCallback=function(t,e){return d(function(){return t},e)},t.useEffect=c,t.useLayoutEffect=l,t.useMemo=d,t.useReducer=function(t,e,r){var u=!o.setup&&r?r(e):e,a=n(f(u),2),i=a[0],s=a[1];return[i,function(e){return s(t(i,e))}]},t.useRef=function(t){return n(f({current:t}),1)[0]},t.useState=function(t){var e=o;return f(t,function(t,n){return"function"==typeof t?t(e.states[n]):t})},t.withHooks=function(t){var e={hooks:[],setup:!1,states:[],statesIndex:0,depsStates:[],depsIndex:0,updates:[],teardowns:new Map};return{onupdate:function(){var t=o;o=e;try{e.updates.forEach(u)}finally{Object.assign(e,{setup:!0,updates:[],depsIndex:0,statesIndex:0}),o=t}},view:function(n){var r=o;o=e;try{return t(n.attrs)}catch(t){console.error(t)}finally{o=r}},onremove:function(){var t=o;o=e;try{r(e.teardowns.values()).forEach(u)}finally{o=t}}}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=mithril-hooks.js.map
